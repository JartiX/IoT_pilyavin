# –°–∏—Å—Ç–µ–º–∞ —Å–≤—è–∑–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ
---

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª—É–¥—É–ø–ª–µ–∫—Å–Ω—É—é —Å–≤—è–∑—å –º–µ–∂–¥—É –¥–≤—É–º—è Arduino —á–µ—Ä–µ–∑ GPIO. –ö–æ–¥ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π ‚Äî –æ–±–∞ –ú–ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ sketch.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫:  ASCII ‚Üí Morse Code ‚Üí GPIO –∏–º–ø—É–ª—å—Å—ã
–ü—Ä–∏—ë–º–Ω–∏–∫:    GPIO –∏–º–ø—É–ª—å—Å—ã ‚Üí Morse Code ‚Üí ASCII
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫** (—Å—Ç—Ä–æ–∫–∏ 289-345): –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å HIGH/LOW –Ω–∞ TX_PIN
- **–ü—Ä–∏—ë–º–Ω–∏–∫** (—Å—Ç—Ä–æ–∫–∏ 347-489): –∏–∑–º–µ—Ä—è–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ RX_PIN
- **–ö–æ–¥–∏—Ä–æ–≤—â–∏–∫** (—Å—Ç—Ä–æ–∫–∏ 201-213): ASCII ‚Üí —Å—Ç—Ä–æ–∫–∞ —Ç–æ—á–µ–∫/—Ç–∏—Ä–µ
- **–î–µ–∫–æ–¥–∏—Ä–æ–≤—â–∏–∫** (—Å—Ç—Ä–æ–∫–∏ 215-225): —Å—Ç—Ä–æ–∫–∞ —Ç–æ—á–µ–∫/—Ç–∏—Ä–µ ‚Üí ASCII
- **–¢–∞–π–º–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (—Å—Ç—Ä–æ–∫–∏ 157-183): —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ —á–µ—Ä–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

---

## 2. –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–∏–Ω–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 7-14)

| –ü–∏–Ω | –§—É–Ω–∫—Ü–∏—è | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-----|---------|-------------|
| 2 | SENSOR_PIN | INT0 ‚Äî –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ |
| 3 | RX_PIN | INT1 ‚Äî –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è |
| 5 | TX_PIN | –û–±—ã—á–Ω—ã–π GPIO –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ |
| 8-10 | Shift Register | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 7-—Å–µ–≥–º–µ–Ω—Ç–æ–º (—ç–∫–æ–Ω–æ–º–∏—è –ø–∏–Ω–æ–≤) |
| 11-12 | LED_TX, LED_RX | –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è |

**–ü–æ—á–µ–º—É –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –¥–ª—è –ø–∏–Ω–æ–≤ 2 –∏ 3:**
- –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏–º–ø—É–ª—å—Å–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω–∞ (¬±10 –º—Å)
- Main loop –∏–º–µ–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ (Serial.print, display update)
- ISR –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–∫—Ü–∏—é <10 –º–∫—Å (—Å—Ç—Ä–æ–∫–∏ 260-281)

**–ü–æ—á–µ–º—É TX_PIN –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:**
- –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è state machine –≤ loop()
- –¢–æ—á–Ω–æ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–¥–æ–ø—É—Å–∫ ¬±50 –º—Å)
- –£–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É

### –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä Timer1

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (—Å—Ç—Ä–æ–∫–∏ 185-199):
```cpp
// CTC —Ä–µ–∂–∏–º, prescaler 256
// –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π: 10 Hz (–∫–∞–∂–¥—ã–µ 100 –º—Å)
OCR1A = 6249  // (16000000 / (256 * 10)) - 1
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–º—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ —Ç–∞–π–º–µ—Ä–∞–º–∏ –≤ ISR (—Å—Ç—Ä–æ–∫–∏ 157-183)
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ (500 –º—Å)
- –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–æ—Å–∞ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (2000 –º—Å)
- –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ (100 –º—Å)

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```
–ú–ö A: TX_PIN (5) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îú‚îÄ‚îÄ‚ñ∂ GPIO –ª–∏–Ω–∏—è
–ú–ö B: RX_PIN (3) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ú–ö B: TX_PIN (5) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îú‚îÄ‚îÄ‚ñ∂ GPIO –ª–∏–Ω–∏—è
–ú–ö A: RX_PIN (3) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 3. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 17-29)

```cpp
DOT_DURATION = 200 ms    // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–æ—á–∫–∏
DASH_DURATION = 600 ms   // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∏—Ä–µ (3√óDOT)
SYMBOL_GAP = 200 ms      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–æ—á–∫–æ–π/—Ç–∏—Ä–µ
LETTER_GAP = 600 ms      // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏
WORD_GAP = 1400 ms       // –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏
```

### –¢–∞–π–º–µ—Ä–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 36-47)

```cpp
DISPLAY_HOLD_TICKS = 5   // 5 √ó 100ms = 500ms (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞)
RX_RESET_TICKS = 20      // 20 √ó 100ms = 2000ms (—Å–±—Ä–æ—Å RX)
TX_COMPLETE_TICKS = 1    // 1 √ó 100ms = 100ms (—Å–±—Ä–æ—Å TX)
```

### –î–∏–∞–ø–∞–∑–æ–Ω—ã –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 22-27)

```cpp
DOT:    120 ‚â§ t ‚â§ 350 ms
DASH:   400 ‚â§ t ‚â§ 900 ms
LETTER: –ø–∞—É–∑–∞ ‚â• 400 ms
WORD:   –ø–∞—É–∑–∞ ‚â• 1000 ms
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —à–∏—Ä–æ–∫–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤:**
- –†—É—á–Ω–æ–π –≤–≤–æ–¥: —á–µ–ª–æ–≤–µ–∫ –Ω–µ –º–æ–∂–µ—Ç —Ç–æ—á–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å
- Raw-—Ä–µ–∂–∏–º: –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–µ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- –°–µ—Ä–∞—è –∑–æ–Ω–∞ (350-400 –º—Å): —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ DOT (—Å—Ç—Ä–æ–∫–∏ 417, 421)

### –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–ª—è 'A' (.-):

```
Time:  0    200  400  600        1200
       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
TX:    ‚îÇ .  ‚îÇ    ‚îÇ      -       ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       [200][200][     600     ][200]
        DOT  GAP      DASH       GAP
```

---

## 4. –¢–∞–π–º–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### 4.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π

**ISR Timer1** (—Å—Ç—Ä–æ–∫–∏ 157-183):
```cpp
ISR(TIMER1_COMPA_vect) {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 100 –º—Å
  
  // 1. Display hold timer (500 –º—Å)
  if (displayTimerActive) {
    displayTimerTicks++
    if (ticks >= 5) pendingDisplayClear = true
  }
  
  // 2. RX reset timer (2000 –º—Å)
  if (rxResetTimerActive) {
    rxResetTimerTicks++
    if (ticks >= 20) pendingReceiveInit = true
  }
  
  // 3. TX complete timer (100 –º—Å)
  if (txCompleteTimerActive) {
    txCompleteTimerTicks++
    if (ticks >= 1) pendingTxIdle = true
  }
}
```

### 4.2 –ú–µ—Ö–∞–Ω–∏–∑–º —Ñ–ª–∞–≥–æ–≤

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ main loop** (—Å—Ç—Ä–æ–∫–∏ 569-582):
```cpp
void loop() {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∏–∑ ISR
  if (pendingDisplayClear) {
    pendingDisplayClear = false
    // –î–∏—Å–ø–ª–µ–π –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–∏–º–≤–æ–ª
  }
  
  if (pendingReceiveInit) {
    pendingReceiveInit = false
    receiveInit()  // –°–±—Ä–æ—Å –ø—Ä–∏—ë–º–Ω–∏–∫–∞
  }
  
  if (pendingTxIdle) {
    pendingTxIdle = false
    txState = TX_IDLE  // –°–±—Ä–æ—Å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ISR –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ —Å—á—ë—Ç—á–∏–∫–∏ –∏ —Ñ–ª–∞–≥–∏)
- –¢—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (Serial, displayChar) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ main loop
- –ò–∑–±–µ–≥–∞–µ–º –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—Ö–æ–¥–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏–∏

### 4.3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ–µ–º

**displayChar()** (—Å—Ç—Ä–æ–∫–∏ 227-240):
```cpp
void displayChar(char c) {
  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –Ω–∞ 7-—Å–µ–≥–º–µ–Ω—Ç–µ
  shiftOut(DATA_PIN, CLOCK_PIN, MSBFIRST, code)
  
  // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è
  displayTimerActive = true
  displayTimerTicks = 0
  // –ß–µ—Ä–µ–∑ 500 –º—Å ISR —É—Å—Ç–∞–Ω–æ–≤–∏—Ç pendingDisplayClear
}
```

---

## 5. –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3 —Ä–µ–∂–∏–º–∞ (enum Mode, —Å—Ç—Ä–æ–∫–∞ 32):

### 5.1 AUTO Mode (—Å—Ç—Ä–æ–∫–∏ 594-636, 651-653)

**–í—Ö–æ–¥:** Serial Monitor ‚Üí —Ç–µ–∫—Å—Ç  
**–û–±—Ä–∞–±–æ—Ç–∫–∞:** –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤  
**–í—ã—Ö–æ–¥:** TX_PIN (—Å—Ç—Ä–æ–∫–∏ 316-330)

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```cpp
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "HELLO" + Enter
loop() { 
  if (Serial.available()) {           // —Å—Ç—Ä–æ–∫–∞ 584
    autoMessage[] –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã // —Å—Ç—Ä–æ–∫–∏ 629-635
  }
  if (Enter pressed) {
    transmitInit(autoMessage)         // —Å—Ç—Ä–æ–∫–∞ 626
  }
}

transmitUpdate() {                     // —Å—Ç—Ä–æ–∫–∏ 311-345
  for (–∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª) {
    encodeToMorse(symbol)              // —Å—Ç—Ä–æ–∫–∞ 296, 335
    for (–∫–∞–∂–¥–∞—è —Ç–æ—á–∫–∞/—Ç–∏—Ä–µ) {
      digitalWrite(TX_PIN, HIGH)       // —Å—Ç—Ä–æ–∫–∞ 319
      delay_nonblocking(DOT/DASH)      // —Å—Ç—Ä–æ–∫–∏ 323-324
      digitalWrite(TX_PIN, LOW)        // —Å—Ç—Ä–æ–∫–∞ 325
    }
  }
}
```

### 5.2 MANUAL Mode (—Å—Ç—Ä–æ–∫–∏ 491-537, 655-658)

**–í—Ö–æ–¥:** –∫–Ω–æ–ø–∫–∞ –Ω–∞ SENSOR_PIN  
**–û–±—Ä–∞–±–æ—Ç–∫–∞:** –∏–∑–º–µ—Ä–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∂–∞—Ç–∏—è ‚Üí –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è DOT/DASH  
**–í—ã—Ö–æ–¥:** TX_PIN

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```cpp
// ISR —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –Ω–∞–∂–∞—Ç–∏—è/–æ—Ç–ø—É—Å–∫–∞–Ω–∏—è
buttonISR() {                          // —Å—Ç—Ä–æ–∫–∏ 260-271
  if (pressed) buttonPressTime = now   // —Å—Ç—Ä–æ–∫–∞ 264
  if (released) buttonReleased = true  // —Å—Ç—Ä–æ–∫–∞ 269
}

// Main loop –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç
manualModeUpdate() {                   // —Å—Ç—Ä–æ–∫–∏ 492-537
  duration = now - buttonPressTime     // —Å—Ç—Ä–æ–∫–∞ 496
  
  if (120 ‚â§ duration ‚â§ 350)           // —Å—Ç—Ä–æ–∫–∞ 499
    append('.')                        // —Å—Ç—Ä–æ–∫–∞ 500
  else if (400 ‚â§ duration ‚â§ 900)      // —Å—Ç—Ä–æ–∫–∞ 503
    append('-')                        // —Å—Ç—Ä–æ–∫–∞ 504
  
  if (silence ‚â• LETTER_GAP)           // —Å—Ç—Ä–æ–∫–∞ 512
    decodeCharacter()                  // —Å—Ç—Ä–æ–∫–∞ 516
  
  if (silence ‚â• WORD_GAP)             // —Å—Ç—Ä–æ–∫–∞ 528
    transmitInit(buffer)               // —Å—Ç—Ä–æ–∫–∞ 533
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** —á–µ–ª–æ–≤–µ–∫ –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –ú–æ—Ä–∑–µ, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∞–π–º–∏–Ω–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ.

### 5.3 RAW Mode (—Å—Ç—Ä–æ–∫–∏ 540-544, 646-648)

**–í—Ö–æ–¥:** –∫–Ω–æ–ø–∫–∞ –Ω–∞ SENSOR_PIN  
**–û–±—Ä–∞–±–æ—Ç–∫–∞:** –û–¢–°–£–¢–°–¢–í–£–ï–¢  
**–í—ã—Ö–æ–¥:** –ø—Ä—è–º–∞—è –∫–æ–ø–∏—è —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ TX_PIN

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```cpp
void rawModeUpdate() {                 // —Å—Ç—Ä–æ–∫–∏ 540-544
  bool state = digitalRead(SENSOR_PIN) // —Å—Ç—Ä–æ–∫–∞ 541
  digitalWrite(TX_PIN, state)          // —Å—Ç—Ä–æ–∫–∞ 542
  // –ù–∏–∫–∞–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏!
}
```

**–¶–µ–ª—å:** –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –∫ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã–º —Å–∏–≥–Ω–∞–ª–∞–º.

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 594-643)

**–£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥:**
- –û–¥–∏–Ω–æ—á–Ω—ã–π —Å–∏–º–≤–æ–ª 'a', 'm', 'r' ‚Üí —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞
- –°–ª–æ–≤–∞ "arm", "mars" ‚Üí –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç

```cpp
if (strlen(autoMessage) == 1) {       // —Å—Ç—Ä–æ–∫–∞ 596
  char c = autoMessage[0]
  if (c == 'a') MODE_AUTO             // —Å—Ç—Ä–æ–∫–∞ 599
  else if (c == 'm') MODE_MANUAL      // —Å—Ç—Ä–æ–∫–∞ 606
  else if (c == 'r') MODE_RAW         // —Å—Ç—Ä–æ–∫–∞ 614
}
else {
  transmitInit(autoMessage)           // —Å—Ç—Ä–æ–∫–∞ 626 ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–∫—Å—Ç–∞
}
```

---

## 6. –ö–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã

### 6.1 –ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫ FSM (—Å—Ç—Ä–æ–∫–∏ 114, 118)

**–°–æ—Å—Ç–æ—è–Ω–∏—è:** TX_IDLE, TX_SENDING, TX_COMPLETE

**–ü–µ—Ä–µ—Ö–æ–¥—ã:**
```
TX_IDLE ‚îÄ‚îÄ[transmitInit]‚îÄ‚îÄ‚ñ∂ TX_SENDING ‚îÄ‚îÄ[buffer empty]‚îÄ‚îÄ‚ñ∂ TX_COMPLETE ‚îÄ‚îÄ[timer 100ms]‚îÄ‚îÄ‚ñ∂ TX_IDLE
          (—Å—Ç—Ä–æ–∫–∞ 294)         ‚îÇ                              (—Å—Ç—Ä–æ–∫–∞ 339)   (—Å—Ç—Ä–æ–∫–∏ 668-672)
                               ‚îÇ
                         [transmitUpdate —Ü–∏–∫–ª]
                               ‚îÇ
                         ‚îú‚îÄ‚îÄ symbol == '.' : HIGH 200ms
                         ‚îú‚îÄ‚îÄ symbol == '-' : HIGH 600ms
                         ‚îî‚îÄ‚îÄ pause : LOW
```

**–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
```cpp
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 290-309)
txState = TX_SENDING
encodeToMorse(txBuffer[0], currentMorseCode)  // –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª
morseIndex = 0

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π loop() (—Å—Ç—Ä–æ–∫–∏ 311-345)
if (morseIndex < strlen(currentMorseCode)) {
  symbol = currentMorseCode[morseIndex]
  digitalWrite(TX_PIN, HIGH)
  wait duration
  digitalWrite(TX_PIN, LOW)
  morseIndex++
}
else if (elapsed >= LETTER_GAP) {
  txIndex++
  if (txIndex < strlen(txBuffer)) {
    encodeToMorse(next char)
  }
  else txState = TX_COMPLETE
}

// –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä
if (txState == TX_COMPLETE) {
  txCompleteTimerActive = true  // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ 100–º—Å
  txCompleteTimerTicks = 0
}
```

### 6.2 –ü—Ä–∏—ë–º–Ω–∏–∫ FSM (—Å—Ç—Ä–æ–∫–∏ 115, 126)

**–°–æ—Å—Ç–æ—è–Ω–∏—è:** RX_IDLE, RX_RECEIVING, RX_COMPLETE, RX_ERROR

**–ü–µ—Ä–µ—Ö–æ–¥—ã:**
```
RX_IDLE ‚îÄ‚îÄ[first pulse]‚îÄ‚îÄ‚ñ∂ RX_RECEIVING ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ[timeout 3s]‚îÄ‚îÄ‚ñ∂ RX_COMPLETE ‚îÄ‚îÄ[timer 2s]‚îÄ‚îÄ‚ñ∂ RX_IDLE
          (—Å—Ç—Ä–æ–∫–∞ 372)       ‚îÇ              ‚îÇ   (—Å—Ç—Ä–æ–∫–∞ 479)   (—Å—Ç—Ä–æ–∫–∏ 662-666)
                             ‚îÇ              ‚îÇ
                        [receiveUpdate]     ‚îî‚îÄ‚îÄ[error]‚îÄ‚îÄ‚ñ∂ RX_ERROR
                             ‚îÇ                  (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
                             ‚îÇ
                      ‚îú‚îÄ‚îÄ newPulseComplete
                      ‚îÇ   ‚îî‚îÄ‚îÄ classify DOT/DASH
                      ‚îÇ
                      ‚îî‚îÄ‚îÄ silence >= LETTER_GAP
                          ‚îî‚îÄ‚îÄ decodeFromMorse()
```

**–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

**ISR** (—Å—Ç—Ä–æ–∫–∏ 273-287):
```cpp
void rxISR() {
  if (RX_PIN goes HIGH) {
    pulseStartTime = millis()         // —Å—Ç—Ä–æ–∫–∞ 277
    signalActive = true               // —Å—Ç—Ä–æ–∫–∞ 278
    LED_RX = HIGH                     // —Å—Ç—Ä–æ–∫–∞ 279
  }
  else if (RX_PIN goes LOW) {
    pulseDuration = now - pulseStartTime  // —Å—Ç—Ä–æ–∫–∞ 281
    newPulseComplete = true           // —Å—Ç—Ä–æ–∫–∞ 283
    signalActive = false              // —Å—Ç—Ä–æ–∫–∞ 282
    LED_RX = LOW                      // —Å—Ç—Ä–æ–∫–∞ 285
  }
}
```

**Main loop** (—Å—Ç—Ä–æ–∫–∏ 359-489):
```cpp
void receiveUpdate() {
  if (newPulseComplete) {              // —Å—Ç—Ä–æ–∫–∞ 360
    duration = pulseDuration           // —Å—Ç—Ä–æ–∫–∞ 362
    
    // –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    if (120 ‚â§ duration ‚â§ 350)         // —Å—Ç—Ä–æ–∫–∞ 378
      append('.')                      // —Å—Ç—Ä–æ–∫–∞ 379
    else if (400 ‚â§ duration ‚â§ 900)    // —Å—Ç—Ä–æ–∫–∞ 381
      append('-')                      // —Å—Ç—Ä–æ–∫–∞ 382
  }
  
  // –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω—Ü–∞ –±—É–∫–≤—ã
  silence = now - lastSignalTime       // —Å—Ç—Ä–æ–∫–∞ 435
  if (silence ‚â• LETTER_GAP_MIN) {     // —Å—Ç—Ä–æ–∫–∞ 437
    decoded = decodeFromMorse(morse)   // —Å—Ç—Ä–æ–∫–∞ 442
    displayChar(decoded)               // —Å—Ç—Ä–æ–∫–∞ 450
    rxBuffer += decoded                // —Å—Ç—Ä–æ–∫–∏ 445-449
  }
  
  // –î–µ—Ç–µ–∫—Ü–∏—è –ø—Ä–æ–±–µ–ª–∞
  if (silence ‚â• WORD_GAP_MIN) {       // —Å—Ç—Ä–æ–∫–∞ 452
    rxBuffer += ' '                    // —Å—Ç—Ä–æ–∫–∏ 470-474
  }
  
  // –¢–∞–π–º–∞—É—Ç
  if (silence > 3000ms) {             // —Å—Ç—Ä–æ–∫–∞ 479
    rxState = RX_COMPLETE              // —Å—Ç—Ä–æ–∫–∞ 481
  }
  
  // –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä
  if (rxState == RX_COMPLETE) {
    rxResetTimerActive = true  // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ 2000–º—Å
    rxResetTimerTicks = 0
  }
}
```

### 6.3 –†—É—á–Ω–æ–π –≤–≤–æ–¥ FSM (—Å—Ç—Ä–æ–∫–∏ 135-140, 492-537)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ISR + Main loop:**

```
WAITING ‚îÄ‚îÄ[button press]‚îÄ‚îÄ‚ñ∂ BUTTON_PRESSED ‚îÄ‚îÄ[button release]‚îÄ‚îÄ‚ñ∂ CLASSIFY ‚îÄ‚îÄ‚ñ∂ DECODE ‚îÄ‚îÄ‚ñ∂ TRANSMIT
         (ISR —Å—Ç—Ä–æ–∫–∞ 263)               (ISR —Å—Ç—Ä–æ–∫–∞ 267)       (—Å—Ç—Ä–æ–∫–∞ 496)  (—Å—Ç—Ä–æ–∫–∞ 512)  (—Å—Ç—Ä–æ–∫–∞ 528)
         buttonPressTime                buttonReleased=true    duration      silence       silence
         = millis()                                            check         ‚â•600ms        ‚â•1400ms
```

---

## 7. –ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–Ω–µ—è–≤–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª** –±–µ–∑ START/END –º–∞—Ä–∫–µ—Ä–æ–≤:

```
[–ú–æ–ª—á–∞–Ω–∏–µ] ‚Üí [–ü–µ—Ä–≤—ã–π –∏–º–ø—É–ª—å—Å = AUTO-START] ‚Üí [Payload] ‚Üí [–ú–æ–ª—á–∞–Ω–∏–µ 3s = END]
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è AUTO-START** (—Å—Ç—Ä–æ–∫–∏ 370-376):
```cpp
if (newPulseComplete && !autoStarted) {
  autoStarted = true                   // —Å—Ç—Ä–æ–∫–∞ 372
  rxState = RX_RECEIVING               // —Å—Ç—Ä–æ–∫–∞ 373
  Serial.println("AUTO: Receiving")    // —Å—Ç—Ä–æ–∫–∞ 374
}
```

**–î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω—Ü–∞** (—Å—Ç—Ä–æ–∫–∏ 479-489):
```cpp
if (autoStarted && silence > AUTO_START_TIMEOUT) {  // 3000ms
  rxState = RX_COMPLETE                // —Å—Ç—Ä–æ–∫–∞ 481
  Serial.print("RX: \"")               // —Å—Ç—Ä–æ–∫–∞ 483
  Serial.print(rxBuffer)               // —Å—Ç—Ä–æ–∫–∞ 484
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–æ–¥ –ú–æ—Ä–∑–µ** (—Å—Ç—Ä–æ–∫–∏ 215-225):
```cpp
char decodeFromMorse(const char* morse) {
  // –ø–æ–∏—Å–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ...
  return '?';  // –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω          // —Å—Ç—Ä–æ–∫–∞ 223
}
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞ –¥–∏—Å–ø–ª–µ–µ '?', –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

**–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞** (—Å—Ç—Ä–æ–∫–∏ 445-449, 631-635):
```cpp
if (len < 63) {
  buffer[len] = ch
  buffer[len + 1] = '\0'
}
// –ò–Ω–∞—á–µ: –º–æ–ª—á–∞–ª–∏–≤–æ–µ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
```

**–ü—Ä–µ—Ä–≤–∞–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞** (—Å—Ç—Ä–æ–∫–∞ 479):
```cpp
if (silence > 3000ms) {
  rxState = RX_COMPLETE  // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
}
```

### –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ "HI"

**–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫ (–ú–ö A):**
```cpp
// –í–≤–æ–¥: "hi" + Enter
transmitInit("HI")                     // —Å—Ç—Ä–æ–∫–∞ 626

// H = ....
for i in [0..3]:
  TX_PIN = HIGH (200ms)
  TX_PIN = LOW (200ms)
delay(LETTER_GAP = 600ms)

// I = ..
for i in [0..1]:
  TX_PIN = HIGH (200ms)
  TX_PIN = LOW (200ms)

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π WORD_GAP –æ—Ç timeout
```

**–ü—Ä–∏—ë–º–Ω–∏–∫ (–ú–ö B):**
```cpp
// RX_PIN –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç 4 –∏–º–ø—É–ª—å—Å–∞ –ø–æ 200ms
append('.') √ó 4                        // —Å—Ç—Ä–æ–∫–∞ 379
currentMorseReceived = "...."

// –ú–æ–ª—á–∞–Ω–∏–µ 600ms
decodeFromMorse("....") ‚Üí 'H'         // —Å—Ç—Ä–æ–∫–∞ 442
displayChar('H')                       // —Å—Ç—Ä–æ–∫–∞ 450
rxBuffer = "H"

// RX_PIN –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç 2 –∏–º–ø—É–ª—å—Å–∞
currentMorseReceived = ".."
decodeFromMorse("..") ‚Üí 'I'
displayChar('I')
rxBuffer = "HI"

// Timeout 3s
Serial.print("RX: \"HI\"")            // —Å—Ç—Ä–æ–∫–∞ 483-485
```

---

## 8. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤

### 8.1 Normal —Ä–µ–∂–∏–º (AUTO/MANUAL)

**–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫:** –ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ç–∞–π–º–∏–Ω–≥–æ–≤
- AUTO: –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ 200/600 –º—Å (—Å—Ç—Ä–æ–∫–∏ 17-18, 323-324)
- MANUAL: –∏–∑–º–µ—Ä–µ–Ω–Ω—ã–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Üí –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ (—Å—Ç—Ä–æ–∫–∏ 499-504, –∑–∞—Ç–µ–º 533 ‚Üí transmitInit)

**–ü—Ä–∏—ë–º–Ω–∏–∫:** –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —à–∏—Ä–æ–∫–∏–º–∏ –¥–æ–ø—É—Å–∫–∞–º–∏ (—Å—Ç—Ä–æ–∫–∏ 22-25, 378-391)

### 8.2 Raw —Ä–µ–∂–∏–º

**–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫:** –ø—Ä—è–º–∞—è –∫–æ–ø–∏—è SENSOR_PIN ‚Üí TX_PIN (—Å—Ç—Ä–æ–∫–∏ 541-542)
```cpp
digitalWrite(TX_PIN, digitalRead(SENSOR_PIN))
```

**–ü—Ä–∏—ë–º–Ω–∏–∫:** —Ç–æ—Ç –∂–µ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –¥–æ–ø—É—Å–∫–∞–º–∏

**–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:** –¥–∏–∞–ø–∞–∑–æ–Ω—ã DOT (120-350) –∏ DASH (400-900) –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —à–∏—Ä–æ–∫–∏–µ –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

### 8.3 –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —à—É–º—É

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:**
1. INPUT_PULLUP –¥–ª—è –∫–Ω–æ–ø–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 549)
2. ISR –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 273-287)
3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º–ø—É–ª—å—Å–æ–≤ (<50 –º—Å): –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (—Å—Ç—Ä–æ–∫–∞ 386)
4. –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:
   - t < DOT_MIN ‚Üí DOT (—Å—Ç—Ä–æ–∫–∞ 386)
   - DOT_MAX < t < DASH_MIN ‚Üí DOT (—Å—Ç—Ä–æ–∫–∞ 389)

---

## 9. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### PROGMEM –¥–ª—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç (—Å—Ç—Ä–æ–∫–∏ 53-111)

**–¢–∞–±–ª–∏—Ü–∞ –ú–æ—Ä–∑–µ:**
```cpp
const char morse_A[] PROGMEM = ".-";           // –≤–æ Flash
const char* const morseTable[] PROGMEM = {...} // –≤–æ Flash
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~200 –±–∞–π—Ç RAM –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤–æ Flash

**–î–æ—Å—Ç—É–ø:**
```cpp
strcpy_P(buffer, (char*)pgm_read_ptr(&morseTable[i]))  // —Å—Ç—Ä–æ–∫–∞ 208
```

### F() –º–∞–∫—Ä–æ—Å –¥–ª—è —Å—Ç—Ä–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 305-308, 341, –∏ –¥—Ä.)
```cpp
Serial.println(F("TX: Sending"))  // —Å—Ç—Ä–æ–∫–∞ –≤–æ Flash, –Ω–µ –≤ RAM
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~50 –±–∞–π—Ç RAM

---

## 10. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 10.1 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ø–∞–º—è—Ç–∏

**RAM (2 –ö–ë):**
- `txBuffer[64]`: 64 bytes (—Å—Ç—Ä–æ–∫–∞ 119)
- `rxBuffer[64]`: 64 bytes (—Å—Ç—Ä–æ–∫–∞ 127)
- `autoMessage[64]`: 64 bytes (—Å—Ç—Ä–æ–∫–∞ 148)
- Stack + –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: ~300 bytes

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 63 —Å–∏–º–≤–æ–ª–∞ (—Å—Ç—Ä–æ–∫–∏ 291, 446, 631)

### 10.2 –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ millis():**
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 1 –º—Å
- –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å: ¬±4 –º—Å

**–í–ª–∏—è–Ω–∏–µ:** –∏–º–ø—É–ª—å—Å 200 –º—Å –º–æ–∂–µ—Ç –∏–∑–º–µ—Ä–∏—Ç—å—Å—è –∫–∞–∫ 196-204 –º—Å

**–°–º—è–≥—á–µ–Ω–∏–µ:** —à–∏—Ä–æ–∫–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã (DOT: 120-350 –≤–º–µ—Å—Ç–æ 180-220)

### 10.3 –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏

**–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è:**
- 1 —Ç–æ—á–∫–∞ = 200 –º—Å ‚Üí 5 DOT/sec
- –°—Ä–µ–¥–Ω—è—è –±—É–∫–≤–∞: ~3 —ç–ª–µ–º–µ–Ω—Ç–∞ ‚Üí ~1.7 —Å–∏–º–≤–æ–ª–∞/—Å–µ–∫
- –° —É—á—ë—Ç–æ–º –ø–∞—É–∑: ~1 —Å–∏–º–≤–æ–ª/—Å–µ–∫

**–ü—Ä–∏–º–µ—Ä:** "HELLO" (20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤) ‚âà 15 —Å–µ–∫—É–Ω–¥

### 10.4 –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–æ–¥ ‚Üí '?' (—Å—Ç—Ä–æ–∫–∞ 223), –Ω–æ –Ω–µ—Ç –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ–¥–∞—á–∏

**–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ (CRC)
- –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (ACK/NACK)
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞

### 10.5 –ü–æ–ª—É–¥—É–ø–ª–µ–∫—Å

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –æ–±–æ–∏–º–∏ –ú–ö ‚Üí –∫–æ–ª–ª–∏–∑–∏—è (–Ω–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è)

**–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** CSMA/CD

### 10.6 –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã

**–¢–æ–ª—å–∫–æ:** A-Z, 0-9, –ø—Ä–æ–±–µ–ª (—Å—Ç—Ä–æ–∫–∏ 54-100)

**–ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:** –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è (!?.,;)

### 10.7 –î—Ä–µ–±–µ–∑–≥ –∫–Ω–æ–ø–∫–∏

**–°–º—è–≥—á–µ–Ω–∏–µ:** 
- INPUT_PULLUP (—Å—Ç—Ä–æ–∫–∞ 549)
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø—É–ª—å—Å–æ–≤ <50 –º—Å (—Å—Ç—Ä–æ–∫–∞ 386)

**–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π debounce —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

---

## 11. –ü—Ä–æ–µ–∫—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 11.1 –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–†–µ—à–µ–Ω–∏–µ:** ISR –¥–ª—è SENSOR_PIN, RX_PIN –∏ Timer1 (—Å—Ç—Ä–æ–∫–∏ 157-287, 563-564)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- **RX_PIN:** —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è ¬±10 –º—Å –∫—Ä–∏—Ç–∏—á–Ω–∞
- **SENSOR_PIN:** —Ñ–∏–∫—Å–∞—Ü–∏—è timestamp –Ω–∞–∂–∞—Ç–∏—è/–æ—Ç–ø—É—Å–∫–∞–Ω–∏—è
- **Timer1:** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **TX_PIN:** –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è FSM, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏

### 11.2 –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** State Machines + millis() + Timer interrupts (—Å—Ç—Ä–æ–∫–∏ 569-672)

```cpp
void loop() {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–ª–∞–≥–æ–≤ –æ—Ç ISR
  if (pendingDisplayClear) { ... }
  if (pendingReceiveInit) { receiveInit() }
  if (pendingTxIdle) { txState = TX_IDLE }
  
  if (Serial.available()) processCommand()
  transmitUpdate()  // FSM step
  receiveUpdate()   // FSM step
  
  // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
  if (rxState == RX_COMPLETE) {
    rxResetTimerActive = true  // ISR –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 2000–º—Å
  }
  if (txState == TX_COMPLETE) {
    txCompleteTimerActive = true  // ISR –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 100–º—Å
  }
}
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** 
- –ü–æ–ª—É–¥—É–ø–ª–µ–∫—Å —Ç—Ä–µ–±—É–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—é TX/RX
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–µ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏—ë–º–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏

### 11.3 –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –∫–æ–¥

**–†–µ—à–µ–Ω–∏–µ:** –æ–¥–∏–Ω sketch –¥–ª—è –æ–±–æ–∏—Ö –ú–ö

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å loopback —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ–¥–Ω–æ–º –ú–ö

### 11.4 –ù–µ—è–≤–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª

**–†–µ—à–µ–Ω–∏–µ:** –¥–µ—Ç–µ–∫—Ü–∏—è START/END —á–µ—Ä–µ–∑ —Ç–∞–π–º–∞—É—Ç—ã (—Å—Ç—Ä–æ–∫–∏ 370-376, 479-489)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –∞–∑–±—É–∫–∏ –ú–æ—Ä–∑–µ
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å "–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø–æ—Ç–æ–∫" –±–µ–∑ –ø–∞—É–∑

### 11.5 –¢–∞–π–º–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –±–∞–∑–µ ISR

**–†–µ—à–µ–Ω–∏–µ:** –æ–¥–∏–Ω –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–º—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ —Ç–∞–π–º–µ—Ä–∞–º–∏

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –≠–∫–æ–Ω–æ–º–∏—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (Arduino Uno –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ 3 —Ç–∞–π–º–µ—Ä–∞)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ 100 –º—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞–¥–∞—á (500–º—Å, 2000–º—Å, 100–º—Å)
- ISR –º–∏–Ω–∏–º–∞–ª–µ–Ω (—Ç–æ–ª—å–∫–æ —Å—á—ë—Ç—á–∏–∫–∏), —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ main loop
- –ò–∑–±–µ–≥–∞–µ–º –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—Ö–æ–¥–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏–∏

---

## 12. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

### –°—Å—ã–ª–∫–∏

üîó **–°–∏–º—É–ª—è—Ü–∏—è Tinkercad:** [https://www.tinkercad.com/things/jw8V2tMLZhx-cool-jaiks-maimu?sharecode=By_eyDQ8t1beANJ8IdfJGNBH8AkQCGiJs21HDkSbaoc]
üé• **–í–∏–¥–µ–æ:** [https://disk.yandex.ru/i/_vXjAaYmDOdTnQ][https://disk.yandex.ru/i/cSVSJRWXvXB-1g]  

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏

‚úÖ –¢—Ä–∏ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç–∞—é—Ç (AUTO, MANUAL, RAW)  
‚úÖ 7-segment –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–∏–º–≤–æ–ª—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π —É–¥–µ—Ä–∂–∞–Ω–∏—è (500–º—Å —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä)  
‚úÖ Serial Monitor –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ LED –º–∏–≥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ  
‚úÖ –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥: 'a' ‚Üí —Ä–µ–∂–∏–º, "arm" ‚Üí —Ç–µ–∫—Å—Ç  
‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ —Ç–∞–π–º–µ—Ä–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

---

## 13. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç:
- ‚úÖ 3 —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (AUTO, MANUAL, RAW)
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (FSM + –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è + Timer1)
- ‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∏—Ä–æ–∫–∏–µ –¥–æ–ø—É—Å–∫–∏)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø–∞–º—è—Ç–∏ (PROGMEM, F())
- ‚úÖ –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ–±–æ–∏—Ö –ú–ö
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤